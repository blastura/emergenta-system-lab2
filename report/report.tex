\documentclass[titlepage, a4paper, 12pt]{article}
\usepackage[swedish]{babel}
\usepackage[utf8]{inputenc}
\usepackage{verbatim}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{parskip}

% SourceCode
\usepackage{listings}
\usepackage{color}

% Include pdf with multiple pages ex \includepdf[pages=-, nup=2x2]{filename.pdf}
\usepackage[final]{pdfpages}
% Place figures where they should be
\usepackage{float}

% SourceCode
\definecolor{keywordcolor}{rgb}{0.5,0,0.75}
\lstset{
  inputencoding=utf8,
  language=Java,
  extendedchars=true,
  basicstyle=\scriptsize\ttfamily,
  stringstyle=\color{blue},
  commentstyle=\color{red},
  numbers=left,
  firstnumber=auto,
  numberblanklines=true,
  stepnumber=1,
  showstringspaces=false,
  keywordstyle=\color{keywordcolor}
  % identifierstyle=\color{identifiercolor}
}

% Float for text
\floatstyle{ruled}
\newfloat{kod}{H}{lop}
\floatname{kod}{Kodsnutt}

% vars
\def\title{Boids}
\def\preTitle{Laboration 2}
\def\kurs{Emergenta system, VT-09}

\def\namn{Andreas Jakobsson}
\def\mail{dit06ajs@cs.umu.se}
\def\namnTva{Anton Johansson}
\def\mailTva{dit06ajn@cs.umu.se}

\def\pathtocode{$\sim$dit06ajn/edu/emergenta-system/lab2/src}

\def\handledareEtt{Jonny Pettersson, jonny@cs.umu.se}
\def\handledareTva{Anders Broberg, bopspe@cs.umu.se}

\def\inst{datavetenskap}
\def\dokumentTyp{Laborationsrapport}

\begin{document}
\begin{titlepage}
  \thispagestyle{empty}
  \begin{small}
    \begin{tabular}{@{}p{\textwidth}@{}}
      UMEÅ UNIVERSITET \hfill \today \\
      Institutionen för \inst \\
      \dokumentTyp \\
    \end{tabular}
  \end{small}
  \vspace{10mm}
  \begin{center}
    \LARGE{\preTitle} \\
    \huge{\textbf{\kurs}} \\
    \vspace{10mm}
    \LARGE{\title} \\
    \vspace{15mm}
    \begin{large}
      \namn, \mail \\
      \namnTva, \mailTva\\
      \texttt{\pathtocode}
    \end{large}
    \vfill
    \large{\textbf{Handledare}}\\
    \mbox{\large{\handledareEtt}}
    \mbox{\large{\handledareTva}}
  \end{center}
\end{titlepage}

\newpage
\mbox{}
\vspace{70mm}
\begin{center}
% Dedication goes here
\end{center}
\thispagestyle{empty}
\newpage

\pagestyle{fancy}
\rhead{\today}
\lhead{\footnotesize{\namn, \mail\\\namnTva, \mailTva}}
\chead{}
\lfoot{}
\cfoot{}
\rfoot{}

\cleardoublepage
\newpage
\tableofcontents
\cleardoublepage

% \fancyfoot[LE,RO]{\thepage}
\cfoot{\thepage}
\pagenumbering{arabic}

\section{Problemspecifikation}\label{sec:problemspecifikation}
Laborationen gick ut på att göra ändringar i en befintlig
NetLogo\footnote{http://ccl.northwestern.edu/netlogo/} modell som
imiterar flockbete. Modellen utvecklades av Craig Reynolds på 80-talet
och varje individ, så kallad \textit{boid}, följer tre enkla regler:

\begin{itemize}
\item Undvik kollision med grannar.
\item Håll samma hastighet och riktning som dina grannar.
\item Försök ha en  position så nära centrum av flocken som möjligt.
\end{itemize}

Denna modell ska utökas så att flockarna ska kunna undvika hinder i
dess väg, och att de istället för att röra sig slumpvis omkring i
miljön ska kunna röra sig mot ett gemensamt mål som bestäms av
muspekarens position.

\subsection{Frågor som ska behandlas}
I problemspecifikationen finns följande frågor som denna rapport ska
behandla.

\textbf{Hinder:}
\begin{itemize}
\item Vad krävs för att en flock ska kunna splittras upp när de
  undviker ett hinder och gå ihop till en samlad flock när hindret är
  passerat?
\item Vilken metod valde ni och varför?
\item Hur skulle er metod fungera med andra hinder än punktformade?
\item Finns det någon gräns för hur stora hindren kan vara?
\end{itemize}

\textbf{Mål:}
\begin{itemize}
\item Modellen ska utvidgas till att inkludera ett gemensamt mål,
  alltså en punkt eller yta i världen som alla boids strävar efter att
  nå.
\item Minimikravet är att man ska kunna ställa in målet genom att med
  muspekaren välja en punkt i världen
\item Frågor att fundera kring:
\item Hur bibehålls flockbeteendet när ett mål finns?
\item Hur stor vikt bör man lägga på mål, hinder och flockbeteende för
  att få ett beteende som ser naturligt ut?
\item Vilken sorts beteende anser ni är naturligt eller önskvärt? 
\end{itemize}

Laborationsspecifikation finns i original på sidan:\\
\verb!http://www.cs.umu.se/kurser/5DV017/VT09/lab/lab2.html!

\section{Algoritmbeskrivning}
Nedan avsnitt beskriver de algoritmer som implementerats för att
införa hinderavvikelse och målsökande i modellen.

\subsection{Hinder}
För att flockarna ska kunna undvika hinder har det införts nya agenter
härefter refererade som \textit{hinder}. Varje individ fått en ny
procedur \textit{obstacle-avoidance} som utförs efter att de har
utfört sitt flock-beteende.

Hinderundvikande görs genom att varje individ letar efter det närmaste
hinder som befinner sig i en kon framför deras färdriktning. Denna
kons storlek bestäms av variablerna \textit{vision-radius} och
\textit{vision-angle}. Om ett hinder upptäckts som är närmare
individen än vad variabeln \textit{minimum-range-to-obstacle} anger så
svänger individen bort från detta hinder %TODO.

\subsection{Mål}
För att få flockarna att söka sig mot ett gemensamt mål
implementerades proceduren \textit{find-goal} som räknar ut vinkeln
mot målet, som representeras av muspekaren. Individerna svänger mot
målet med maximal vinkel som är samma som individerna får använda sig
av för att röra sig mot mitten av flocken, \textit{max-cohere-turn}.

\section{Strategi för testning}

\section{Reflektioner}
% Rapportens huvudsyfte är att redovisa era reflektioner kring det som
% laborationen behandlar, dvs reflektionsdelen är viktig.  Diskutera
% de frågor som nämns ovan och försöka att sätta in laborationen i ett
% större sammanhang. Vilka applikationsområden kan du se för den här
% typen av algoritmer?  Kan modellen utöka för att göras mer
% intressant?

% I er rapport ska följande punkter tas med:

%     * Ett fullständigt försättsblad
%     * Sökvägen till er NetLogo-kod (kan skrivas på försättsbladet)
%     * Reflektion kring er lösning och eventuella begränsningar
%     * Reflektion kring de frågor som ställs ovan samt saker som
%       du själv finner relevant. Ta gärna hjälp av skärmdumpar.
%     * Utskriven dokumenterad källkod
Nedan avsnitt beskriver analysen som gjorts med avseende på frågorna
från problemspecifikationen.

\subsection{Hinder}
% Vad krävs för att en flock ska kunna splittras 
%     upp när de undviker ett hinder och gå ihop
%     till en samlad flock när hindret är passerat?
% Vilken metod valde ni och varför?
% Hur skulle er metod fungera med andra hinder än punktformade?
% Finns det någon gräns för hur stora hindren kan vara?
\subsection{Mål}
% Modellen ska utvidgas till att inkludera ett gemensamt mål,
%           alltså en punkt eller yta i världen som alla boids
%           strävar efter att nå.
% Minimikravet är att man ska kunna ställa in målet genom att
%             med muspekaren välja en punkt i världen
% Hur bibehålls flockbeteendet när ett mål finns?
% Hur stor vikt bör man lägga på mål, hinder och flockbeteende
%             för att få ett beteende som ser naturligt ut?
% Vilken sorts beteende anser ni är naturligt eller önskvärt? 

\newpage
\appendix
\pagenumbering{roman}
\section{Källkod}\label{sec:kallkod}
% Källkoden ska finnas tillgänglig i er hemkatalog
% ~/edu/apjava/lab1/. Bifoga även utskriven källkod.
Härefter följer utskrifter från källkoden och andra filer som hör till
denna laboration

\subsection{Termites.nlogo}\label{Termites.nlogo}
\begin{footnotesize}
  \verbatiminput{../src/Flocking.nlogo}
\end{footnotesize}
\end{document}
